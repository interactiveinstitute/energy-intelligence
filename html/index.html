<!doctype html>

<title>Energy Screen</title>

<meta charset="utf-8">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
<link rel="stylesheet" href="css/main.css">
<link rel="stylesheet" href="css/cards.css">
<script src="lib/d3.js"></script>
<script src="js/utils.js"></script>
<script src="js/remote.js"></script>
<script src="js/data.js"></script>
<script src="js/bubble.js"></script>
<script src="js/bubblebath.js"></script>
<script src="js/chart.js"></script>
<script src="js/cardboard.js"></script>
<script>
  var config = {
    work_day_hours: [6, 18],
    default_view_after: 10000,
    intervals: [1, 30, 60, 300, 900, 1800, 3600, 10800, 21600, 43200, 86400]
  };
  var remote = new Remote('http://livinglab.powerprojects.se:8002/');
  var chart = new Chart(config, 'https://livinglab.powerprojects.se:6984/sp', innerWidth, innerHeight - 366);
  Cardboard.db = 'https://livinglab.powerprojects.se:6984/sp';
  Cardboard.feed = 'allRooms';
  Cardboard.width = innerWidth;
  Cardboard.height = innerHeight;
</script>

<body>

<svg class="meter">
  <path id="meterShape" fill="#3fa9f5" d="M 41 9 L 201 9 A 32 32 180 1 1 201 73 L 41 73 A 32 32 180 1 1 41 9"/>
  <text text-anchor="middle" alignment-baseline="central" dx="119" dy="41"/>
  <circle cx="" cy="" r="8" fill="url(#now-dot-gradient)">
    <animateMotion dur="6s" repeatCount="indefinite">
      <mpath xlink:href="#meterShape"/>
    </animateMotion>
  </circle>
</svg>
<svg class="time">
  <defs>
    <radialGradient id="popup-gradient" gradientUnits="userSpaceOnUse" r="200">
      <stop stop-color="black" stop-opacity="0" offset="50%"/>
      <stop stop-color="black" stop-opacity=".5" offset="100%"/>
    </radialGradient>
    <linearGradient id="now-line-gradient" x1="0%" y1="0%" x2="100%" y2="0%">
      <stop stop-color="white" stop-opacity="0" offset="0%"/>
      <stop stop-color="white" stop-opacity="1" offset="50%"/>
      <stop stop-color="white" stop-opacity="0" offset="100%"/>
    </linearGradient>
    <radialGradient id="now-dot-gradient">
      <stop stop-color="white" stop-opacity="1" offset="25%"/>
      <stop stop-color="white" stop-opacity="0" offset="100%"/>
    </radialGradient>
    <linearGradient id="left-gradient" x1="0%" y1="0%" x2="100%" y2="0%">
      <stop stop-color="#000" stop-opacity="1" offset="0%"/>
      <stop stop-color="#000" stop-opacity="0" offset="100%"/>
    </linearGradient>
    <filter id="popup-shadow">
      <feOffset in="SourceAlpha" dx="0" dy="0" result="offOut"/>
      <feGaussianBlur in="offOut" stdDeviation="4" result="blurOut"/>
      <feBlend in="SourceGraphic" in2="blurOut" mode="normal"/>
    </filter>
  </defs>
  <g class="x axis"/>
  <g class="y axis"/>
  <g class="zooms">
    <g class="container"/>
  </g>
  <rect class="leftGradientBox" width="90" fill="url(#left-gradient)"/>
  <g class="yText axis"/>
  <g class="extras"/>
  <g class="bubblebath withHighlights"/>
  <g class="loading">
    <rect fill="#000"/>
    <text text-anchor="middle" alignment-baseline="central">loading</text>
  </g>
</svg>
<div class="zoomer">
  <div class="handle"></div>
</div>
<div class="buttons">
</div>

<div class="toggle">TOGGLE!</div>

<div class="cards left" data-height="512"></div>
<div class="cards top right" data-height="256"></div>

<script>
  chart.init('.time', '.zoomer', '.meter', '.buttons', '.toggle');
  Cardboard.init('.cards');
</script>
